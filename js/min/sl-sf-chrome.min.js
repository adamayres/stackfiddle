/**
 * Scriptloader
 *    https://github.com/adamayres/scriptloader/
 *  
 * Copyright (c) 2012, Adam Ayres 
 * 
 * Licensed under the MIT license:
 *    https://github.com/adamayres/scriptloader/raw/master/MIT-LICENSE.txt
 *
 * Sun Jan  1 14:15:11 PST 2012
 */
var ScriptLoader=function(){var a=document.head||document.getElementsByTagName("head")[0]||document.documentElement,b={},c=function(a,b){var c=!1,d=a.split("."),e=b.split(".");for(var f=0;f<e.length;f++){if(d[f]>e[f]){c=!0;break}d[f]==e[f]?c=!0:c=!1}return c},d=function(c,d,e){b.hasOwnProperty(c)||(b[c]=!1,d.onload=d.onreadystatechange=function(f,g){b[c]=!0;if(!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,!a||!d.parentNode,d=undefined,typeof e=="function"&&e()},a.insertBefore(d,a.firstChild))},e=function(a,b){var c=document.createElement("script");c.setAttribute("async","async"),c.setAttribute("src",a),c.setAttribute("type","text/javascript"),d(a,c,b)},f=function(a){var b=document.createElement("link");b.setAttribute("href",a),b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),d(a,b)};return{addJs:function(a,b){e(a,b)},addCss:function(a){f(a)},isAssetLoaded:function(a){return b[a]||!1},isVersionLoaded:function(a,b){return c(a,b)}}}();
/**
 * StackFiddle
 *    https://github.com/adamayres/stackfiddle/
 *  
 * Copyright (c) 2012, Adam Ayres 
 * 
 * Licensed under the MIT license:
 *    https://github.com/adamayres/stackfiddle/raw/master/MIT-LICENSE.txt
 *
 * Sun Jan  1 14:15:11 PST 2012
 */
var StackFiddle=function(){var b,c={stackUrl:"",scripts:[],onMouseoverCode:function(){},onMouseoutCode:function(){},onCloseLinkClick:function(){},openDialog:function(){}};isInit=!1;var d=function(a){var b="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js",d=0,e=function(){d<c.scripts.length?ScriptLoader.addJs(c.scripts[d++],e):a()};!window.hasOwnProperty("jQuery")||!ScriptLoader.isVersionLoaded(window.jQuery.fn.jquery,"1.4.4")?ScriptLoader.addJs(b,e):e()},e=function(e){if(isInit!==!0){isInit=!0;for(a in e)c[a]=e[a];d(function(){b=$(f);var a=b.find("#sf-form");b.find("#sf-close-link").click(c.onCloseLinkClick),i(a),h(a),c.openDialog(b)})}else c.openDialog(b)},f="<div id='sf-wrapper'><div id='sf-header'><div id='sf-close'><a id='sf-close-link' href='#' class='simplemodal-close'>close</a></div><div id='sf-title'>Stack Fiddle It!</div></div><div id='sf-feedback'>Loading...</div><div id='sf-content'><form id='sf-form' method='post' action='http://jsfiddle.net/api/post/mootools/1.3.2/' target='_blank'><div id='sf-code' /><div class='sf-form-group'><label for='sf-frameworks'>Framework</label><select id='sf-frameworks'><option>Loading...</option></select></div><input type='submit' value='Fiddle It!' id='sf-submit' /></form></div></div>",g="<div class='sf-form-group'><label class='sf-code-label' /><textarea /><input type='radio' value='html' id='sf-code-html' /><label for='sf-code-html'>HTML</label><input type='radio' value='css' id='sf-code-css' /><label for='sf-code-css'>CSS</label><input type='radio' value='js' id='sf-code-js' /><label for='sf-code-js'>JS</label><input type='radio' value='none' id='sf-code-none' /><label for='sf-code-none'>None</label><div class='sf-show-container'><a href='#' class='sf-show-more sf-show'>More</a> | <a href='#' class='sf-show-less sf-show'>Less</a></div></div>",h=function(a){var d=function(){var a=5365997,b=c.stackUrl.split("/");for(var d=0;d<b.length;d++)if(b[d]=="questions"&&d+1<b.length){a=b[d+1];break}return a},e=function(a,b,c){var d=c.get(0),e=c.height();if(c.height()===d.scrollHeight){while(c.height()===d.scrollHeight)c.height(c.height()-1);c.height(c.height()+2)}b.click(function(){return c.animate({height:"+=100px"},200),!1}),a.click(function(){return c.animate({height:c.height()<=100?10:"-=100px"},200),!1})};$.ajax({url:"http://api.stackoverflow.com/1.1/questions/"+d()+"?body=true",dataType:"jsonp",jsonp:"jsonp",success:function(d){var e=d.questions[0].body,f=$(e).find("code"),h=b.find("#sf-code"),i=$(":input[type='radio']",a[0]),j=b.find("#sf-feedback"),k=$("#question").find("code").map(function(){return codeParent=$(this).parent("pre"),codeParent.size()>0?codeParent.get():this});f.each(function(a){var b=$(g),d=b.find("textarea"),e=b.find(".sf-show-more"),f=b.find(".sf-show-less");d.html($(this).html()),b.find(".sf-code-label").html("Code Block "+(a+1)),b.find("input").each(function(){this.id=this.id+a,this.name="code"+a}),b.find("label").each(function(){var b=$(this);b.attr("for",b.attr("for")+a)}),h.append(b),b.hover(function(){c.onMouseoverCode(!0,a)},function(){c.onMouseoutCode(!1,a)})}),i.live("click",function(){var a=$(this);textarea=a.siblings("textarea"),a.val()=="none"?textarea.attr("disabled","disabled"):(textarea.removeAttr("disabled"),textarea.attr("name",a.val()))}),a.submit(function(){var b={},c=a.find("textarea");$.each(["html","css","js"],function(b,d){var e=c.filter("[name='"+this+"']");if(e.size()>1){var f="";e.each(function(){var a=$(this);f+=a.val(),a.attr("disabled","disabled")});var g=$("<input>",{type:"hidden",name:d,value:f});a.append(g)}})}),j.text("Choose a content type for each code block")}})},i=function(a){var b="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Fjsfiddle.net%22%20and%20xpath%3D%22%2F%2Fselect%5B%40id%3D'js_lib'%5D%22&diagnostics=true";$.ajax({url:b,dataType:"jsonp",success:function(b){var c=$(b.results[0]),d=c.find("option"),e=c.find("optgroup"),f=a.find("#sf-frameworks");d.each(function(){var a=$(this),b=a.text().replace(/[A-Za-z ()\-]*/g,"");b===""?a.remove():a.val("/"+a.closest("optgroup").attr("label")+"/"+b+"/")}),e.each(function(){var a=$(this);a.children().size()===0&&a.remove()}),f.replaceWith(c),c.change(function(){a.attr("action","http://jsfiddle.net/api/post"+c.val())})}})};return{init:e,openDialog:function(){c.openDialog(b)}}}();
/**
 * StackFiddle Chrome Init
 *    https://github.com/adamayres/stackfiddle-chrome/
 *  
 * Copyright (c) 2012, Adam Ayres 
 * 
 * Licensed under the MIT license:
 *    https://github.com/adamayres/stackfiddle-chrome/raw/master/MIT-LICENSE.txt
 *
 * Sun Jan  1 14:15:11 PST 2012
 */
chrome.tabs.getSelected(null,function(a){var b=function(b,c){chrome.tabs.sendRequest(a.id,{hover:b,codeIndex:c})};StackFiddle.init({stackUrl:a.url,scripts:[],onMouseoverCode:b,onMouseoutCode:b,onCloseLinkClick:function(){window.close()},openDialog:function(a){$("#sf-container").empty().append(a)}})});