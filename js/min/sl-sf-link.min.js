/**
 * Scriptloader
 *    https://github.com/adamayres/stackfiddle/
 *  
 * Copyright (c) 2012, Adam Ayres 
 * 
 * Licensed under the MIT license:
 *    https://stackfiddle.com/MIT-LICENSE.txt
 *
 * Sun Jan  8 16:57:44 PST 2012
 */
var ScriptLoader=function(){var a=document.head||document.getElementsByTagName("head")[0]||document.documentElement,b={},c=function(a,b){var c=!1,d=a.split("."),e=b.split(".");for(var f=0;f<e.length;f++){if(d[f]>e[f]){c=!0;break}d[f]==e[f]?c=!0:c=!1}return c},d=function(c,d,e){b.hasOwnProperty(c)||(b[c]=!1,d.onload=d.onreadystatechange=function(f,g){b[c]=!0;if(!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,!a||!d.parentNode,d=undefined,typeof e=="function"&&e()},a.insertBefore(d,a.firstChild))},e=function(a,b){var c=document.createElement("script");c.setAttribute("async","async"),c.setAttribute("src",a),c.setAttribute("type","text/javascript"),d(a,c,b)},f=function(a){var b=document.createElement("link");b.setAttribute("href",a),b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),d(a,b)};return{addJs:function(a,b){e(a,b)},addCss:function(a){f(a)},isAssetLoaded:function(a){return b[a]||!1},isVersionLoaded:function(a,b){return c(a,b)}}}();
/**
 * StackFiddle
 *    https://github.com/adamayres/stackfiddle/
 *  
 * Copyright (c) 2012, Adam Ayres 
 * 
 * Licensed under the MIT license:
 *    https://stackfiddle.com/MIT-LICENSE.txt
 *
 * Sun Jan  8 16:57:44 PST 2012
 */
var StackFiddle=function(){var b,c={stackUrl:"",scripts:[],onMouseoverCode:function(){},onMouseoutCode:function(){},openDialog:function(){},closeDialog:function(){},applyEventListenersOnOpen:!1};isInit=!1;var d=function(a){var b=0,d=[];(!window.hasOwnProperty("jQuery")||!ScriptLoader.isVersionLoaded(window.jQuery.fn.jquery,"1.4.4"))&&d.push("http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"),d.push("http://stackfiddle.com/js/libs/jquery.nanoscroller.js"),d=d.concat(c.scripts);var e=function(){b<d.length?ScriptLoader.addJs(d[b++],e):a()};e()},e=function(e){if(isInit!==!0){isInit=!0;for(a in e)c[a]=e[a];d(function(){b=$(f);var a=b.find("#sf-form"),d=a.find("#sf-frameworks");c.openDialog(b),j(a,d),h(a),k(b)})}},f="<div id='sf-wrapper'><div id='sf-header'><div id='sf-close'><a id='sf-close-link' href='#' class='simplemodal-close'>close</a></div><div id='sf-title'>StackFiddle</div></div><div id='sf-feedback'>Loading...</div><div id='sf-content'><form id='sf-form' method='post' action='http://jsfiddle.net/api/post/mootools/1.3.2/' target='_blank'><div id='sf-code-container'><div id='sf-code' /></div><div class='sf-form-group'><label for='sf-frameworks'>Framework</label><select id='sf-frameworks'><option>Loading...</option></select></div><input type='submit' value='Fiddle It!' id='sf-submit' /></form></div></div>",g="<div class='sf-form-group'><label class='sf-code-label' /><textarea /><input type='radio' value='html' id='sf-code-html' /><label for='sf-code-html'>HTML</label><input type='radio' value='css' id='sf-code-css' /><label for='sf-code-css'>CSS</label><input type='radio' value='js' id='sf-code-js' /><label for='sf-code-js'>JS</label><input type='radio' value='none' id='sf-code-none' /><label for='sf-code-none'>None</label><div class='sf-show-container'><a href='#' class='sf-show-more sf-show'>More</a> | <a href='#' class='sf-show-less sf-show'>Less</a></div></div>",h=function(a){var d=function(){var a=5358066,b=c.stackUrl.split("/");for(var d=0;d<b.length;d++)if(b[d]=="questions"&&d+1<b.length){a=b[d+1];break}return a},e={js:["$","(","v",";"],html:["<","&"],css:[".","#"]},f=function(a,b){var c=$.trim(a.replace(/\/\*.+?\*\/|\/\/.*(?=[\n\r])/g,""))[0];for(lang in e)if($.inArray(c,e[lang])>-1){b.find("input[value='"+lang+"']").prop("checked",!0);break}};$.ajax({url:"http://api.stackoverflow.com/1.1/questions/"+d()+"?body=true",dataType:"jsonp",jsonp:"jsonp",success:function(a){var d=a.questions[0].body,e=$(d).find("code"),h=b.find("#sf-code"),j=b.find("#sf-feedback"),k=$("#question").find("code").map(function(){return codeParent=$(this).parent("pre"),codeParent.size()>0?codeParent.get():this});e.each(function(a){var b=$(g),d=b.find("textarea"),j=d.get(0),k=$(this);b.addClass("sf-code-group"),d.html(k.html()),b.find(".sf-code-label").html("Code Block "+(a+1)),b.find("input").each(function(){this.id=this.id+a,this.name="code"+a}),b.find("label").each(function(){var b=$(this);b.attr("for",b.attr("for")+a)}),h.append(b);var l=function(){d.height(0).css({resize:"none"});var a=d.get(0).scrollHeight>100?100:d.get(0).scrollHeight;d.height(a).css({resize:"auto"})};if(!d.is(":hidden"))l(),e.length==a+1&&i();else var m=20,n=window.setInterval(function(){if(!d.is(":hidden")||m--==0)window.clearInterval(n),l(),e.length==a+1&&i()},50);f(d.html(),b),b.hover(function(){c.onMouseoverCode(!0,a)},function(){c.onMouseoutCode(!1,a)})}),j.text("Choose a content type for each code block")}})},i=function(a){var c=b.find("#sf-code"),d=b.find("#sf-code-container"),e=c.closest("#sf-nano").size()>0;if(c.height()>400){e||(c.wrap("<div class='nano-container' />").wrap("<div id='sf-nano' class='nano' />").wrap("<div class='content' />"),c.closest(".nano-container").height(c.height()-100));var f=c.closest(".content");a=a?a.top:0;var g=a>f.offset().top+f.height()?{scrollTop:f.scrollTop()+100}:{};b.find("#sf-nano").nanoScroller(g)}else e&&d.html(c)},j=function(a,b){var c="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Fjsfiddle.net%22%20and%20xpath%3D%22%2F%2Fselect%5B%40id%3D'js_lib'%5D%22&diagnostics=true",d=["Three.js (edge)","YUI 2.8.0r4"];$.ajax({url:c,dataType:"jsonp",success:function(a){var c=$(a.results[0]),e=c.find("option"),f=c.find("optgroup");e.each(function(){var a=$(this),b=a.text().replace(/[A-Za-z ()\-]*/g,"");b===""||$.inArray(b,d)>-1?a.remove():a.val("/"+a.closest("optgroup").attr("label")+"/"+b+"/")}),f.each(function(){var a=$(this);a.children().size()===0&&a.remove()}),b.html(c.html())}})},k=function(a){var b=a.find("#sf-form"),d=b.find("#sf-frameworks"),e=b.find(".sf-code-group");$(".sf-show-more",a[0]).live("click",function(a){var b=$(this),c=b.closest(".sf-form-group").find("textarea");return c.animate({height:"+=100px"},0,function(){i(b.offset())}),!1}),$(".sf-show-less",a[0]).live("click",function(a){var b=$(this),c=b.closest(".sf-form-group").find("textarea");return c.animate({height:c.height()<=100?13:"-=100px"},0,function(){i(b.offset())}),!1}),a.find("#sf-close-link").click(c.closeDialog),b.submit(function(){var a={},e=b.find("textarea"),f=$("input:radio:checked",b);f.each(function(){var a=$(this);textarea=a.siblings("textarea"),a.val()=="none"?textarea.attr("disabled","disabled"):(textarea.removeAttr("disabled"),textarea.attr("name",a.val()))}),$.each(["html","css","js"],function(a,c){var d=e.filter("[name='"+this+"']");if(d.size()>1){var f="";d.each(function(){var a=$(this);f+=a.val(),a.prop("disabled","disabled")});var g=$("<input>",{type:"hidden",name:c,value:f});b.append(g)}}),b.attr("action","http://jsfiddle.net/api/post"+d.val()),setTimeout(c.closeDialog,300)})};return{init:e,openDialog:function(){c.openDialog(b),c.applyEventListenersOnOpen===!0&&k(b)}}}();
/**
 * StackFiddle Link
 *    https://github.com/adamayres/stackfiddle/
 *  
 * Copyright (c) 2012, Adam Ayres 
 * 
 * Licensed under the MIT license:
 *    https://stackfiddle.com/MIT-LICENSE.txt
 *
 * Sun Jan  8 16:57:44 PST 2012
 */
(function(){var a,b=function(){if(a)return a;a=[];var b=document.getElementById("question");if(b){var c=b.getElementsByTagName("code");for(i=0;i<c.length;i++)c[i].parentNode.tagName.toLowerCase()==="pre"&&a.push(c[i])}return a},c=function(a,c){b().length>0&&$(b()[c].parentNode).toggleClass("sf-highlight")},d=!1,e,f=function(a){d!==!0&&(d=!0,e=a.modal({closeHTML:null,overlayId:"sf-overlay",containerId:"sf-container",opacity:10,minWidth:350,autoPosition:!1,onOpen:function(a){a.overlay.fadeIn(200,function(){a.data.show(),a.container.css({height:"auto",top:"30px",right:"30px",left:"auto",position:"absolute"}),a.container.show()})},onClose:function(a){d=!1,e.close()}}))},g=document.getElementById("sf-loader");g.parentNode.removeChild(g),ScriptLoader.addCss("http://stackfiddle.com/css/stackfiddle.css"),StackFiddle.init({stackUrl:window.location.pathname,scripts:["http://stackfiddle.com/js/libs/jquery.simplemodal.min.js"],onMouseoverCode:c,onMouseoutCode:c,openDialog:f,closeDialog:function(){e.close()},applyEventListenersOnOpen:!0})})();